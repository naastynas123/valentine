<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Valentine ðŸ’˜</title>

<style>
:root{
  --glass: rgba(20,20,20,.45);
  --glass-border: rgba(255,255,255,.18);
  --text: #fff;
  --green: #46c26f;
  --green2:#2fb85c;
  --red: #f04a4a;
  --red2:#e23c3c;
  --envelope:#9fc7ff;
  --envelope-dark:#86b4ff;
  --paper:#ffffff;
  --seal:#ff5a7a;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color:var(--text);
  overflow:hidden;
  background:#000;
}

/* Keep your original styling unchanged */
.btnRow{
  display:flex;
  gap:16px;
  flex-wrap:wrap;
  justify-content:center;
  margin-top:10px;
  position:relative;
  width:100%;
  max-width:600px;
  height:220px; /* movement arena */
}

.btn{
  border:0;
  border-radius:999px;
  padding:14px 26px;
  font-weight:900;
  font-size:18px;
  cursor:pointer;
  color:#fff;
  box-shadow: 0 14px 30px rgba(0,0,0,.35);
  user-select:none;
  min-width:160px;
}

.yes{ background: linear-gradient(180deg, var(--green), var(--green2)); }
.no{ background: linear-gradient(180deg, var(--red), var(--red2)); }
</style>
</head>

<body>

<div id="page1">
  <h1>Will you be my Valentine Quyen? ðŸ’˜</h1>
  <div id="noZone" class="btnRow">
    <button id="yesBtn" class="btn yes">Yes ðŸ’–</button>
    <button id="noBtn" class="btn no">No ðŸ¥º</button>
  </div>
</div>

<div id="page2" style="display:none;">
  <h1>YAY, 2 valentines down... 98 more to go!! ðŸ’ž</h1>
  <div id="envelope">ðŸ’Œ CLICK ME</div>
</div>

<div id="page3" style="display:none;">
  <div id="typedText"></div>
</div>

<script>

/* -----------------------------
   PAGE SWITCHING
------------------------------*/
const page1 = document.getElementById("page1");
const page2 = document.getElementById("page2");
const page3 = document.getElementById("page3");

function showPage(n){
  page1.style.display="none";
  page2.style.display="none";
  page3.style.display="none";
  if(n===1) page1.style.display="block";
  if(n===2) page2.style.display="block";
  if(n===3) page3.style.display="block";
}

/* -----------------------------
   YES BUTTON
------------------------------*/
document.getElementById("yesBtn").addEventListener("click",()=>{
  showPage(2);
});

/* -----------------------------
   ENVELOPE
------------------------------*/
document.getElementById("envelope").addEventListener("click",()=>{
  showPage(3);
  typeLetter();
});

/* -----------------------------
   LETTER TYPING
------------------------------*/
const letter = `I can't wait to spend the rest of my life with you pooks.

You've given life a new purpose.
You've given me something to smile about every day.
You've given me a reason to be better every day.

I hope we grow into big back young adults, big back real adults,
and big back parents with our big back children.

I don't know what the future holds for us,
but I know with you by my side, everything will be going right.

Signed,
your tubby mans ðŸ’˜`;

function typeLetter(){
  const el = document.getElementById("typedText");
  el.textContent="";
  let i=0;
  function type(){
    el.textContent = letter.slice(0,i);
    i++;
    if(i<=letter.length){
      setTimeout(type,20);
    }
  }
  type();
}

/* ==================================================
   FIXED NO BUTTON (NEVER FREEZES, RUNS FOREVER)
================================================== */

const noBtn  = document.getElementById("noBtn");
const noZone = document.getElementById("noZone");

let armed=false;

function arm(){
  if(armed) return;

  const rect=noBtn.getBoundingClientRect();
  const zone=noZone.getBoundingClientRect();

  noBtn.style.position="absolute";
  noBtn.style.left=(rect.left-zone.left)+"px";
  noBtn.style.top=(rect.top-zone.top)+"px";

  armed=true;
}

function moveButton(){
  arm();

  const zoneRect=noZone.getBoundingClientRect();
  const btnRect=noBtn.getBoundingClientRect();

  const padding=10;
  const maxX=zoneRect.width-btnRect.width-padding;
  const maxY=zoneRect.height-btnRect.height-padding;

  const randomX=Math.random()*maxX+padding;
  const randomY=Math.random()*maxY+padding;

  noBtn.style.transition="left .18s ease-out, top .18s ease-out";
  noBtn.style.left=randomX+"px";
  noBtn.style.top=randomY+"px";
}

noZone.addEventListener("pointermove",(e)=>{
  const rect=noBtn.getBoundingClientRect();
  const centerX=rect.left+rect.width/2;
  const centerY=rect.top+rect.height/2;

  const dist=Math.hypot(e.clientX-centerX,e.clientY-centerY);

  if(dist<150){
    moveButton();
  }
});

noBtn.addEventListener("pointerdown",(e)=>{
  e.preventDefault();
  moveButton();
});

</script>
</body>
</html>
